version: 0.3

#codegenHealthbar programmable(w:uint=200, h:uint=20, health:uint=75, maxHealth:uint=100, whiteLoss:uint=90) {
      // Background bar (dark)
      ninepatch("ui", "Sliderbar_H_3x1", $w, $h): 10, 20

      // White loss bar (shows recent damage)
      ninepatch("ui", "button-disabled", $w * $whiteLoss / $maxHealth, $h - 4): 12, 22

      // Health bar (green when healthy, red when low)
      @final healthBarW = $w * $health / $maxHealth
      @(health => 30..100) ninepatch("ui", "button-idle", $healthBarW, $h - 4): 12, 22
      @(health => 0..30) ninepatch("ui", "button-pressed", $healthBarW, $h - 4): 12, 22

      // Health text centered on the bar
      text(dd, $health, white, center, 200): 10, 23
}
