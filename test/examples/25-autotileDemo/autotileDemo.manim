version: 0.3

// =============================================================================
// AUTOTILE SIMPLE13 FORMAT TEST - Tests buildAutotile() with simple13 format
// =============================================================================
// Simple13 format uses 13 tiles: 9 outer (3x3 grid) + 4 inner corners
// Full 1280x720 layout
// =============================================================================

// Demo autotile - water terrain (black/white)
#simple13Water autotile {
    format: simple13
    tileSize: 16
    demo: black, #EEE
}

// Colorful autotile with index numbers - for debugging which tile is used where
#simple13Colored autotile {
    format: simple13
    tileSize: 16
    tiles:
        // Row 0: NW(0), N(1), NE(2) - edges with no top neighbor
        generated(colorWithText(16, 16, 0xFF4444, "0", white, f3x5))     // 0: NW corner - red
        generated(colorWithText(16, 16, 0xFF6666, "1", white, f3x5))     // 1: N edge
        generated(colorWithText(16, 16, 0xFF8888, "2", white, f3x5))     // 2: NE corner
        // Row 1: W(3), C(4), E(5) - middle row
        generated(colorWithText(16, 16, 0xFFAAAA, "3", black, f3x5))     // 3: W edge
        generated(colorWithText(16, 16, 0x44FF44, "4", black, f3x5))     // 4: Center - green
        generated(colorWithText(16, 16, 0xFFCCCC, "5", black, f3x5))     // 5: E edge
        // Row 2: SW(6), S(7), SE(8) - edges with no bottom neighbor
        generated(colorWithText(16, 16, 0xFFDDDD, "6", black, f3x5))     // 6: SW corner
        generated(colorWithText(16, 16, 0xFFEEEE, "7", black, f3x5))     // 7: S edge
        generated(colorWithText(16, 16, 0xFFFFFF, "8", black, f3x5))     // 8: SE corner
        // Inner corners (9-12): for diagonal gaps in otherwise surrounded tiles
        generated(colorWithText(16, 16, 0x44AAFF, "9", white, f3x5))     // 9: inner NE - blue
        generated(colorWithText(16, 16, 0x4488FF, "10", white, f3x5))    // 10: inner NW
        generated(colorWithText(16, 16, 0x4466FF, "11", white, f3x5))    // 11: inner SE
        generated(colorWithText(16, 16, 0x4444FF, "12", white, f3x5))    // 12: inner SW
}

// Visual demo - shows all 13 tiles with index and edge labels
#autotileDemo programmable() {
    pos: 0, 0
    grid: 1280, 720

    @alpha(0.1) bitmap(generated(color(1280, 720, black)));

    // Simple13 format tiles - 13 tiles in 2 rows
    // Row 0: tiles 0-6 (outer 3x3 first row + second row start)
    point {
        pos: 20, 40
        text(f3x5, "0", 0x888888, right, 10):-12,6
        bitmap(generated(autotile("simple13Water", 0))):0,0
        text(f3x5, "NW", 0x888888, left, 50):0,18

        text(f3x5, "1", 0x888888, right, 10):43,6
        bitmap(generated(autotile("simple13Water", 1))):55,0
        text(f3x5, "N", 0x888888, left, 50):55,18

        text(f3x5, "2", 0x888888, right, 10):98,6
        bitmap(generated(autotile("simple13Water", 2))):110,0
        text(f3x5, "NE", 0x888888, left, 50):110,18

        text(f3x5, "3", 0x888888, right, 10):153,6
        bitmap(generated(autotile("simple13Water", 3))):165,0
        text(f3x5, "W", 0x888888, left, 50):165,18

        text(f3x5, "4", 0x44FF44, right, 10):208,6
        bitmap(generated(autotile("simple13Water", 4))):220,0
        text(f3x5, "C", 0x44FF44, left, 50):220,18

        text(f3x5, "5", 0x888888, right, 10):263,6
        bitmap(generated(autotile("simple13Water", 5))):275,0
        text(f3x5, "E", 0x888888, left, 50):275,18

        text(f3x5, "6", 0x888888, right, 10):318,6
        bitmap(generated(autotile("simple13Water", 6))):330,0
        text(f3x5, "SW", 0x888888, left, 50):330,18
    }

    // Row 1: tiles 7-12 (outer bottom row + inner corners)
    point {
        pos: 20, 65
        text(f3x5, "7", 0x888888, right, 10):-12,6
        bitmap(generated(autotile("simple13Water", 7))):0,0
        text(f3x5, "S", 0x888888, left, 50):0,18

        text(f3x5, "8", 0x888888, right, 10):43,6
        bitmap(generated(autotile("simple13Water", 8))):55,0
        text(f3x5, "SE", 0x888888, left, 50):55,18

        text(f3x5, "9", 0x4488FF, right, 10):98,6
        bitmap(generated(autotile("simple13Water", 9))):110,0
        text(f3x5, "iNE", 0x4488FF, left, 50):110,18

        text(f3x5, "10", 0x4488FF, right, 10):153,6
        bitmap(generated(autotile("simple13Water", 10))):165,0
        text(f3x5, "iNW", 0x4488FF, left, 50):165,18

        text(f3x5, "11", 0x4488FF, right, 10):208,6
        bitmap(generated(autotile("simple13Water", 11))):220,0
        text(f3x5, "iSE", 0x4488FF, left, 50):220,18

        text(f3x5, "12", 0x4488FF, right, 10):263,6
        bitmap(generated(autotile("simple13Water", 12))):275,0
        text(f3x5, "iSW", 0x4488FF, left, 50):275,18
    }

    // Legend
    point {
        pos: 10, 100
        text(f3x5, "Legend: NW/N/NE/W/E/SW/S/SE=outer, C=center, iXX=inner corner", 0x666666, left);
        text(f3x5, "Red/Pink=outer edges, Green=center, Blue=inner corners", 0x888888, left):0,8
    }

    // Map positions (used by test code, multiply by scale 4.0)
    // mapColored: 20,114 -> x=80, y=456 at scale 4.0
    // mapWater: 130,114 -> x=520, y=456 at scale 4.0 (with black background)
    bitmap(generated(color(90, 70, black))):130,114
}
