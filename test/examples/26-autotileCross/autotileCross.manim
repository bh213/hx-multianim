version: 0.3

// =============================================================================
// AUTOTILE CROSS FORMAT TEST - Tests buildAutotile() with cross format
// =============================================================================
// Cross format is used for isometric elevation tiles with depth.
// Layout: N, W, C, E, S edges + 4 outer corners + 4 inner corners = 13 tiles
// Full 1280x720 layout
// =============================================================================

#crossTest autotile {
    format: cross
    tileSize: 16
    tiles:
        // Edges (indices 0-4)
        generated(colorWithText(16, 16, 0xFF4444, "0", white, dd))     // 0: N edge - red
        generated(colorWithText(16, 16, 0xFF6666, "1", white, dd))     // 1: W edge
        generated(colorWithText(16, 16, 0x44FF44, "2", black, dd))     // 2: Center - green
        generated(colorWithText(16, 16, 0xFF8888, "3", white, dd))     // 3: E edge
        generated(colorWithText(16, 16, 0xFFAAAA, "4", black, dd))     // 4: S edge
        // Outer corners (indices 5-8)
        generated(colorWithText(16, 16, 0xFFCC00, "5", black, dd))     // 5: NW outer - yellow
        generated(colorWithText(16, 16, 0xFFDD00, "6", black, dd))     // 6: NE outer
        generated(colorWithText(16, 16, 0xFFEE00, "7", black, dd))     // 7: SW outer
        generated(colorWithText(16, 16, 0xFFFF00, "8", black, dd))     // 8: SE outer
        // Inner corners (indices 9-12)
        generated(colorWithText(16, 16, 0x44AAFF, "9", white, dd))     // 9: inner NE - blue
        generated(colorWithText(16, 16, 0x4488FF, "10", white, dd))    // 10: inner NW
        generated(colorWithText(16, 16, 0x4466FF, "11", white, dd))    // 11: inner SE
        generated(colorWithText(16, 16, 0x4444FF, "12", white, dd))    // 12: inner SW
}

// Visual demo element
#autotileCross programmable() {
    pos: 0, 0
    grid: 1280, 720

    @alpha(0.1) bitmap(generated(color(1280, 720, black)));

    // Tile Catalog for cross format
    text(dd, "Tile Catalog (cross format):", 0xAAAAFF, left, 300):20,60

    // Edges in cross pattern
    text(dd, "Edges (0-4):", 0x888888, left, 100):20,100
    point {
        pos: 140, 100
        //     N (0)
        //  W(1) C(2) E(3)
        //     S (4)
        bitmap(generated(colorWithText(16, 16, 0xFF4444, "0", white, dd))):20,0   // N
        bitmap(generated(colorWithText(16, 16, 0xFF6666, "1", white, dd))):0,20   // W
        bitmap(generated(colorWithText(16, 16, 0x44FF44, "2", black, dd))):20,20  // C
        bitmap(generated(colorWithText(16, 16, 0xFF8888, "3", white, dd))):40,20  // E
        bitmap(generated(colorWithText(16, 16, 0xFFAAAA, "4", black, dd))):20,40  // S
    }

    // Outer corners
    text(dd, "Outer (5-8):", 0x888888, left, 100):20,200
    point {
        pos: 140, 200
        bitmap(generated(colorWithText(16, 16, 0xFFCC00, "5", black, dd))):0,0
        bitmap(generated(colorWithText(16, 16, 0xFFDD00, "6", black, dd))):20,0
        bitmap(generated(colorWithText(16, 16, 0xFFEE00, "7", black, dd))):40,0
        bitmap(generated(colorWithText(16, 16, 0xFFFF00, "8", black, dd))):60,0
    }

    // Inner corners
    text(dd, "Inner (9-12):", 0x888888, left, 100):20,260
    point {
        pos: 140, 260
        bitmap(generated(colorWithText(16, 16, 0x44AAFF, "9", white, dd))):0,0
        bitmap(generated(colorWithText(16, 16, 0x4488FF, "10", white, dd))):20,0
        bitmap(generated(colorWithText(16, 16, 0x4466FF, "11", white, dd))):40,0
        bitmap(generated(colorWithText(16, 16, 0x4444FF, "12", white, dd))):60,0
    }

    // Legend
    text(dd, "Legend:", 0xAAAAFF, left, 100):20,340
    text(dd, "Red = edge tiles (N/W/E/S borders)", 0xFF8888, left, 400):100,340
    text(dd, "Green = center tile (surrounded)", 0x44FF44, left, 400):100,360
    text(dd, "Yellow = outer corner tiles", 0xFFDD00, left, 400):100,380
    text(dd, "Blue = inner corner tiles", 0x4488FF, left, 400):100,400

    text(dd, "buildAutotile() terrain rendered at right >>>", 0xFFFF88, left, 400):20,480

    text(dd, "The autotile terrain is built from code using builder.buildAutotile()", 0x888888, left, 600):20,560
}
