version: 0.3

// =============================================================================
// AUTOTILE BLOB47 FORMAT TEST - Tests buildAutotile() with blob47 format
// =============================================================================
// Blob47 uses 47 unique tiles for full 8-direction neighbor combinations.
// Each tile shown with demo graphics, labeled with index and edge flags.
// =============================================================================

// Demo autotile - grass terrain
#blob47Grass autotile {
    format: blob47
    tileSize: 16
    demo: 0x228822, 0x44AA44    // dark green edges, grass green fill
}

// Demo autotile - water terrain
#blob47Water autotile {
    format: blob47
    tileSize: 16
    demo: 0x224488, 0x4488CC    // dark blue edges, sea blue fill
}

// Visual demo - shows ALL 47 tiles with index and edge labels
#autotileBlob47 programmable() {
    pos: 0, 0
    grid: 1280, 720

    @alpha(0.1) bitmap(generated(color(1280, 720, black)));

    // Title
    text(dd, "Blob47 - All 47 Tiles (index: edges)", 0xAAAAFF, left, 600):20,15

    // Grass demo tiles - 10 columns, 5 rows
    // Row 0: tiles 0-9
    point {
        pos: 20, 40
        // Tile + label pairs (tile 16px, spacing ~55px for text)
        bitmap(generated(autotile("blob47Grass", 0))):0,0
        text(dd, "0:-", 0x888888, left, 50):0,18

        bitmap(generated(autotile("blob47Grass", 1))):55,0
        text(dd, "1:N", 0x888888, left, 50):55,18

        bitmap(generated(autotile("blob47Grass", 2))):110,0
        text(dd, "2:E", 0x888888, left, 50):110,18

        bitmap(generated(autotile("blob47Grass", 3))):165,0
        text(dd, "3:NE", 0x888888, left, 50):165,18

        bitmap(generated(autotile("blob47Grass", 4))):220,0
        text(dd, "4:N+ne+E", 0x666666, left, 50):220,18

        bitmap(generated(autotile("blob47Grass", 5))):275,0
        text(dd, "5:S", 0x888888, left, 50):275,18

        bitmap(generated(autotile("blob47Grass", 6))):330,0
        text(dd, "6:NS", 0x888888, left, 50):330,18

        bitmap(generated(autotile("blob47Grass", 7))):385,0
        text(dd, "7:ES", 0x888888, left, 50):385,18

        bitmap(generated(autotile("blob47Grass", 8))):440,0
        text(dd, "8:NES", 0x888888, left, 50):440,18

        bitmap(generated(autotile("blob47Grass", 9))):495,0
        text(dd, "9:+ne", 0x666666, left, 50):495,18
    }

    // Row 1: tiles 10-19
    point {
        pos: 20, 75
        bitmap(generated(autotile("blob47Grass", 10))):0,0
        text(dd, "10:+se", 0x666666, left, 50):0,18

        bitmap(generated(autotile("blob47Grass", 11))):55,0
        text(dd, "11:+se", 0x666666, left, 50):55,18

        bitmap(generated(autotile("blob47Grass", 12))):110,0
        text(dd, "12:+ne+se", 0x666666, left, 50):110,18

        bitmap(generated(autotile("blob47Grass", 13))):165,0
        text(dd, "13:W", 0x888888, left, 50):165,18

        bitmap(generated(autotile("blob47Grass", 14))):220,0
        text(dd, "14:NW", 0x888888, left, 50):220,18

        bitmap(generated(autotile("blob47Grass", 15))):275,0
        text(dd, "15:EW", 0x888888, left, 50):275,18

        bitmap(generated(autotile("blob47Grass", 16))):330,0
        text(dd, "16:NEW", 0x888888, left, 50):330,18

        bitmap(generated(autotile("blob47Grass", 17))):385,0
        text(dd, "17:+ne", 0x666666, left, 50):385,18

        bitmap(generated(autotile("blob47Grass", 18))):440,0
        text(dd, "18:SW", 0x888888, left, 50):440,18

        bitmap(generated(autotile("blob47Grass", 19))):495,0
        text(dd, "19:NSW", 0x888888, left, 50):495,18
    }

    // Row 2: tiles 20-29
    point {
        pos: 20, 110
        bitmap(generated(autotile("blob47Grass", 20))):0,0
        text(dd, "20:ESW", 0x888888, left, 50):0,18

        bitmap(generated(autotile("blob47Grass", 21))):55,0
        text(dd, "21:NESW", 0x44FF44, left, 50):55,18

        bitmap(generated(autotile("blob47Grass", 22))):110,0
        text(dd, "22:+ne", 0x666666, left, 50):110,18

        bitmap(generated(autotile("blob47Grass", 23))):165,0
        text(dd, "23:+se", 0x666666, left, 50):165,18

        bitmap(generated(autotile("blob47Grass", 24))):220,0
        text(dd, "24:+se", 0x666666, left, 50):220,18

        bitmap(generated(autotile("blob47Grass", 25))):275,0
        text(dd, "25:+ne+se", 0x666666, left, 50):275,18

        bitmap(generated(autotile("blob47Grass", 26))):330,0
        text(dd, "26:+sw", 0x666666, left, 50):330,18

        bitmap(generated(autotile("blob47Grass", 27))):385,0
        text(dd, "27:+sw", 0x666666, left, 50):385,18

        bitmap(generated(autotile("blob47Grass", 28))):440,0
        text(dd, "28:+sw", 0x666666, left, 50):440,18

        bitmap(generated(autotile("blob47Grass", 29))):495,0
        text(dd, "29:+sw", 0x666666, left, 50):495,18
    }

    // Row 3: tiles 30-39
    point {
        pos: 20, 145
        bitmap(generated(autotile("blob47Grass", 30))):0,0
        text(dd, "30:+ne+sw", 0x666666, left, 50):0,18

        bitmap(generated(autotile("blob47Grass", 31))):55,0
        text(dd, "31:+se+sw", 0x666666, left, 50):55,18

        bitmap(generated(autotile("blob47Grass", 32))):110,0
        text(dd, "32:+se+sw", 0x666666, left, 50):110,18

        bitmap(generated(autotile("blob47Grass", 33))):165,0
        text(dd, "33:all-nw", 0x666666, left, 50):165,18

        bitmap(generated(autotile("blob47Grass", 34))):220,0
        text(dd, "34:+nw", 0x666666, left, 50):220,18

        bitmap(generated(autotile("blob47Grass", 35))):275,0
        text(dd, "35:+nw", 0x666666, left, 50):275,18

        bitmap(generated(autotile("blob47Grass", 36))):330,0
        text(dd, "36:+ne+nw", 0x666666, left, 50):330,18

        bitmap(generated(autotile("blob47Grass", 37))):385,0
        text(dd, "37:+nw", 0x666666, left, 50):385,18

        bitmap(generated(autotile("blob47Grass", 38))):440,0
        text(dd, "38:+nw", 0x666666, left, 50):440,18

        bitmap(generated(autotile("blob47Grass", 39))):495,0
        text(dd, "39:+ne+nw", 0x666666, left, 50):495,18
    }

    // Row 4: tiles 40-46
    point {
        pos: 20, 180
        bitmap(generated(autotile("blob47Grass", 40))):0,0
        text(dd, "40:+se+nw", 0x666666, left, 50):0,18

        bitmap(generated(autotile("blob47Grass", 41))):55,0
        text(dd, "41:all-sw", 0x666666, left, 50):55,18

        bitmap(generated(autotile("blob47Grass", 42))):110,0
        text(dd, "42:+sw+nw", 0x666666, left, 50):110,18

        bitmap(generated(autotile("blob47Grass", 43))):165,0
        text(dd, "43:+sw+nw", 0x666666, left, 50):165,18

        bitmap(generated(autotile("blob47Grass", 44))):220,0
        text(dd, "44:all-se", 0x666666, left, 50):220,18

        bitmap(generated(autotile("blob47Grass", 45))):275,0
        text(dd, "45:all-ne", 0x666666, left, 50):275,18

        bitmap(generated(autotile("blob47Grass", 46))):330,0
        text(dd, "46:ALL", 0x00FF00, left, 50):330,18
    }

    // Legend
    point {
        pos: 10, 220
        text(dd, "Legend: NESW=cardinals, ne/se/sw/nw=corners, ALL=full tile", 0x666666, left);
        text(dd, "21=center (NESW only), 46=all 8 neighbors", 0x888888, left):0,15
    }
}
