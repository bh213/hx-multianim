version: 0.3

// =============================================================================
// FORGOTTEN PLAINS TERRAIN - Real tileset autotile
// =============================================================================
// Uses Minifantasy_ForgottenPlainsTiles.png with region and mapping
//
// Tileset: Minifantasy - Forgotten Plains by Krishna Palacio
// https://krishna-palacio.itch.io/minifantasy-forgotten-plains
// =============================================================================

// Grass terrain autotile from Minifantasy tileset
// Tileset is 69 columns x 23 rows of 8x8 tiles (552x184 pixels)
// Tile indices from Tiled (gid-1): 214-216, 283-285, 352-354, 421-423, 490-492
// Cross format: 0=N, 1=W, 2=C, 3=E, 4=S, 5-8=outer corners, 9-12=inner corners
//
// Grass tiles layout in tileset (column 7-9, rows 3-7):
//   Row 3: 214=NW outer, 215=N edge, 216=NE outer
//   Row 4: 283=W edge,   284=Center, 285=E edge
//   Row 5: 352=SW outer, 353=S edge, 354=SE outer
//   Row 6: 421=iSW,      422=iSE,    423=? (not used)
//   Row 7: 490=iNW,      491=iNE,    492=? (not used)
//
// Using region starting at tile 214 (column 7, row 3) = pixel (56, 24)
// Region covers 3 columns x 5 rows = 24x40 pixels
#grassTerrain autotile {
    format: cross
    tileSize: 8
    file: "Tileset/Minifantasy_ForgottenPlainsTiles.png"
    region: [56, 24, 24, 40]
    mapping: [
        1,    // 0: N edge      -> region tile 1 (215 in tileset)
        3,    // 1: W edge      -> region tile 3 (283 in tileset)
        4,    // 2: Center      -> region tile 4 (284 in tileset)
        5,    // 3: E edge      -> region tile 5 (285 in tileset)
        7,    // 4: S edge      -> region tile 7 (353 in tileset)
        0,    // 5: NW outer    -> region tile 0 (214 in tileset)
        2,    // 6: NE outer    -> region tile 2 (216 in tileset)
        6,    // 7: SW outer    -> region tile 6 (352 in tileset)
        8,    // 8: SE outer    -> region tile 8 (354 in tileset)
        10,   // 9: iNE inner   -> region tile 13 (491 in tileset)
        9,   // 10: iNW inner  -> region tile 12 (490 in tileset)
        13,   // 11: iSE inner  -> region tile 10 (422 in tileset)
        12     // 12: iSW inner  -> region tile 9 (421 in tileset)
    ]
}

// Demo autotile for comparison - shows expected tile positions
#grassDemo autotile {
    format: cross
    tileSize: 8
    demo: 0x66AA44, 0x886644    // green edges, brown fill (matches tileset)
}

// Visual demo element - shows all 13 tiles with labels
#forgottenPlainsTerrain programmable() {
    pos: 0, 0
    grid: 1280, 720

    @alpha(0.1) bitmap(generated(color(1280, 720, black)));

    // Title
    text(f3x5, "FORGOTTEN PLAINS - Cross Format Tiles", white, left):10,10

    // === EDGES (0-4) ===
    text(f3x5, "Edges:", 0xFF6666, left):10,30
    // 0: N edge
    point {
        pos: 50, 28
        text(f3x5, "0", white, right):-2,0
        bitmap(generated(autotile("grassDemo", 0))):0,0
        bitmap(generated(autotile("grassTerrain", 0))):10,0
    }
    // 1: W edge
    point {
        pos: 80, 28
        text(f3x5, "1", white, right):-2,0
        bitmap(generated(autotile("grassDemo", 1))):0,0
        bitmap(generated(autotile("grassTerrain", 1))):10,0
    }
    // 2: Center
    point {
        pos: 110, 28
        text(f3x5, "2", white, right):-2,0
        bitmap(generated(autotile("grassDemo", 2))):0,0
        bitmap(generated(autotile("grassTerrain", 2))):10,0
    }
    // 3: E edge
    point {
        pos: 140, 28
        text(f3x5, "3", white, right):-2,0
        bitmap(generated(autotile("grassDemo", 3))):0,0
        bitmap(generated(autotile("grassTerrain", 3))):10,0
    }
    // 4: S edge
    point {
        pos: 170, 28
        text(f3x5, "4", white, right):-2,0
        bitmap(generated(autotile("grassDemo", 4))):0,0
        bitmap(generated(autotile("grassTerrain", 4))):10,0
    }

    // === OUTER CORNERS (5-8) ===
    text(f3x5, "Outer:", 0xFFCC00, left):10,48
    // 5: NW outer
    point {
        pos: 50, 46
        text(f3x5, "5", white, right):-2,0
        bitmap(generated(autotile("grassDemo", 5))):0,0
        bitmap(generated(autotile("grassTerrain", 5))):10,0
    }
    // 6: NE outer
    point {
        pos: 80, 46
        text(f3x5, "6", white, right):-2,0
        bitmap(generated(autotile("grassDemo", 6))):0,0
        bitmap(generated(autotile("grassTerrain", 6))):10,0
    }
    // 7: SW outer
    point {
        pos: 110, 46
        text(f3x5, "7", white, right):-2,0
        bitmap(generated(autotile("grassDemo", 7))):0,0
        bitmap(generated(autotile("grassTerrain", 7))):10,0
    }
    // 8: SE outer
    point {
        pos: 140, 46
        text(f3x5, "8", white, right):-2,0
        bitmap(generated(autotile("grassDemo", 8))):0,0
        bitmap(generated(autotile("grassTerrain", 8))):10,0
    }

    // === INNER CORNERS (9-12) ===
    text(f3x5, "Inner:", 0x4488FF, left):10,66
    // 9: iNE inner
    point {
        pos: 50, 64
        text(f3x5, "9", white, right):-2,0
        bitmap(generated(autotile("grassDemo", 9))):0,0
        bitmap(generated(autotile("grassTerrain", 9))):10,0
    }
    // 10: iNW inner
    point {
        pos: 80, 64
        text(f3x5, "10", white, right):-2,0
        bitmap(generated(autotile("grassDemo", 10))):0,0
        bitmap(generated(autotile("grassTerrain", 10))):10,0
    }
    // 11: iSE inner
    point {
        pos: 110, 64
        text(f3x5, "11", white, right):-2,0
        bitmap(generated(autotile("grassDemo", 11))):0,0
        bitmap(generated(autotile("grassTerrain", 11))):10,0
    }
    // 12: iSW inner
    point {
        pos: 140, 64
        text(f3x5, "12", white, right):-2,0
        bitmap(generated(autotile("grassDemo", 12))):0,0
        bitmap(generated(autotile("grassTerrain", 12))):10,0
    }

    // Legend
    text(f3x5, "Left=demo, Right=tileset tile", 0x888888, left):10,82
}
